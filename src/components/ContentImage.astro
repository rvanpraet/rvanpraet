---
import type { HTMLAttributes } from 'astro/types'
import { twMerge } from 'tailwind-merge'
import Section from './Section.astro'
import OrientationPicture from './OrientationPicture.astro'
import type { ImageData } from '@/types/image'

interface Props extends HTMLAttributes<'section'> {
  className?: string
  variant: 'left' | 'right'
  image: ImageData
}

const variantClasses = {
  left: {
    content: 'col-start-8 col-span-5',
    image: 'col-start-1 col-span-7',
  },
  right: {
    content: 'col-start-1 col-span-5',
    image: 'col-start-6 col-span-7',
  },
}

const { className, image, variant, ...rest } = Astro.props

const variantClass = variantClasses[variant]

const contentWrapperClasses = twMerge('px-8 row-start-1', variantClasses[variant].content)
const imageWrapperClasses = twMerge('row-start-1', variantClasses[variant].image)

const classes = twMerge('mt-32', className)
---

<Section class={classes} {...rest}>
  <div class={imageWrapperClasses}>
    <OrientationPicture {...image} />
  </div>
  <div class={contentWrapperClasses}>
    <slot />
  </div>
</Section>
